{% extends 'base.html' %}

{% block content %}
<div class="mx-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 p-4">
  {% for course in courses %}
  <div class="card w-96 shadow-sm p-5 relative">
  <figure>
    <img class="rounded-lg object-cover"
      src="{{ url_for('static', filename='images/' ~ course.image_url) }}"
      alt="Shoes" />
  </figure>
  <div class="card-body bg-base-200 rounded-lg">
    <h2 class="card-title font-RobotoMono text-accent md:text-3xl">{{ course.title.upper() }}</h2>
    <p>{{ course.description[:120] + '...' }}</p>
    {% if current_user.is_authenticated %}
    <progress class="progress mt-2" value="{{total_percentage[course]}}" max="100"></progress>
    {% endif %}
    <div class="card-actions flex justify-between items-center w-full">
    {% if current_user.is_authenticated %}
    {% if finished_courses[course] %}
      <div class="badge badge-success font-RobotoMono flex items-center gap-2">
        <svg class="size-[1em]" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g fill="currentColor" stroke-linejoin="miter" stroke-linecap="butt"><circle cx="12" cy="12" r="10" fill="none" stroke="currentColor" stroke-linecap="square" stroke-miterlimit="10" stroke-width="2"></circle><polyline points="7 13 10 16 17 8" fill="none" stroke="currentColor" stroke-linecap="square" stroke-miterlimit="10" stroke-width="2"></polyline></g></svg>
        TERMINADO
      </div>
    {% elif started_courses[course] %}
      <div class="badge badge-info font-RobotoMono flex items-center gap-2">
        <svg class="size-[1em]" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18"><g fill="currentColor"><path d="M7.638,3.495L2.213,12.891c-.605,1.048,.151,2.359,1.362,2.359H14.425c1.211,0,1.967-1.31,1.362-2.359L10.362,3.495c-.605-1.048-2.119-1.048-2.724,0Z" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"></path><line x1="9" y1="6.5" x2="9" y2="10" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"></line><path d="M9,13.569c-.552,0-1-.449-1-1s.448-1,1-1,1,.449,1,1-.448,1-1,1Z" fill="currentColor" data-stroke="none" stroke="none"></path></g></svg>
        INICIADO
      </div>
    {% else %}
      <div class="badge badge-primary font-RobotoMono flex items-center gap-2">
        <svg class="size-[1em]" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g fill="currentColor" stroke-linejoin="miter" stroke-linecap="butt"><circle cx="12" cy="12" r="10" fill="none" stroke="currentColor" stroke-linecap="square" stroke-miterlimit="10" stroke-width="2"></circle><path d="m12,17v-5.5c0-.276-.224-.5-.5-.5h-1.5" fill="none" stroke="currentColor" stroke-linecap="square" stroke-miterlimit="10" stroke-width="2"></path><circle cx="12" cy="7.25" r="1.25" fill="currentColor" stroke-width="2"></circle></g></svg>
        NUEVO
      </div>
    {% endif %}
    {% endif %}
      <a href="{{ course.alias }}" class="btn btn-ghost">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-5 w-5"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M5 12h14M12 5l7 7-7 7" />
            </svg>
      </a>
    </div>
  </div>
</div>
  {% endfor %}
</div>

{% endblock %}